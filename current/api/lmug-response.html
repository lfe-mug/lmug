<html><head><meta charset="UTF-8"><link type="text/css" href="css/default.css" rel="stylesheet"><link type="text/css" href="css/hk-pyg.css" rel="stylesheet"><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><title>lmug-response documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/quasiquoting/lodox">Lodox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">lmug</span> <span class="project-version">0.0.3</span></span> <span class="project-documented">(69% documented)</span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Application</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Includes</span></h3><ul><li class="depth-1"><a href="request.html"><div class="inner">request</div></a></li><li class="depth-1"><a href="response.html"><div class="inner">response</div></a></li></ul><h3 class="no-link"><span class="inner">Modules</span></h3><ul><li class="depth-1"><a href="lmug.html"><div class="inner">lmug</div></a></li><li class="depth-1"><a href="lmug-mw-content-type.html"><div class="inner">lmug-mw-content-type</div></a></li><li class="depth-1"><a href="lmug-opt.html"><div class="inner">lmug-opt</div></a></li><li class="depth-1"><a href="lmug-request.html"><div class="inner">lmug-request</div></a></li><li class="depth-1 current"><a href="lmug-response.html"><div class="inner">lmug-response</div></a></li><li class="depth-1"><a href="lmug-util.html"><div class="inner">lmug-util</div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Exports</span></a></h3><ul><li class="depth-1"><a href="lmug-response.html#func-content-type.2F2"><div class="inner"><span>content-type/2</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-get-header.2F2"><div class="inner"><span>get-header/2</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-header.2F3"><div class="inner"><span>header/3</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-match-header.2F2"><div class="inner"><span>match-header/2</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-match-headers.2F2"><div class="inner"><span>match-headers/2</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-response.2F0"><div class="inner"><span>response/0</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-response.2F1"><div class="inner"><span>response/1</span></div></a></li><li class="depth-1"><a href="lmug-response.html#func-response.2F2"><div class="inner"><span>response/2</span></div></a></li></ul></div><div id="content" class="module-docs"><h1 id="top" class="anchor">lmug-response</h1><div class="doc"><p>Manipulating <code>response</code>s.</p>
</div><div class="public anchor" id="func-content-type.2F2"><h3>content-type/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(resp content-type)</code></pre>
</div><div class="doc"><p>Returns an updated Ring response with the a Content-Type header<br /> corresponding to the given content-type.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L67">view source</a></div></div><div class="public anchor" id="func-get-header.2F2"><h3>get-header/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(resp ())
(resp header-key (<span class="kw">when</span> (is_atom header-key)))
(resp header-key)</code></pre>
</div><div class="doc"><p>Looks up a header in a Ring response (or request) case insensitively,<br /> returning the value of the header, or nil if not present.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L57">view source</a></div></div><div class="public anchor" id="func-header.2F3"><h3>header/3</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(resp header-key header-value)</code></pre>
</div><div class="doc"><p>Returns an updated Ring response with the specified header added.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L50">view source</a></div></div><div class="public anchor" id="func-match-header.2F2"><h3>match-header/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(headers header-key)</code></pre>
</div><div class="doc"><p>Return the first header that matches the given header-key.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L72">view source</a></div></div><div class="public anchor" id="func-match-headers.2F2"><h3>match-headers/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(headers sought-key)</code></pre>
</div><div class="doc"><p>Return all the headers that match the given header-key.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L78">view source</a></div></div><div class="public anchor" id="func-response.2F0"><h3>response/0</h3><div class="doc"><p>Create a default response suitable for use as an lmug handler. As this<br /> function takes no arguments, it cannot be used in the middle of a<br /> middleware chain, only at the beginning.</p>
<p>Returns a function which expects an lmug request as the only argument.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L7">view source</a></div></div><div class="public anchor" id="func-response.2F1"><h3>response/1</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(_handler)</code></pre>
</div><div class="doc"><p>Create a default response suitable for use as an lmug handler. This<br /> function takes one argument (though it is ignored), and as such it can be<br /> used in the middle of a middleware chain.</p>
<p>Note that the intended use for this function is to override the response<br /> generated in the lmug middleware chain up until that point. As such, you<br /> should almost never need to use this function directly.</p>
<p>Returns a function which expects an lmug request as the only argument.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L15">view source</a></div></div><div class="public anchor" id="func-response.2F2"><h3>response/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(_handler opts)</code></pre>
</div><div class="doc"><p>Create a default response suitable for use as an lmug handler. This<br /> function takes two arguments (the first, the handler, is ignored). The second<br /> argument is for options (proplist).</p>
<p>Allowed options are:</p>
<ul>
<li><code>status</code>: HTTP response status number (e.g., 200)<br /></li>
<li><code>headers</code>: HTTP response headers<br /></li>
<li><code>body</code>: HTTP response body</li>
</ul>
<p>This function may be used in the middle of a middleware chain. Note, however,<br /> that the intended use for this function is to override the response<br /> generated in the lmug middleware chain up until that point. As such, you<br /> should almost never need to use this function directly.</p>
<p>Returns a function which expects an lmug request as the only argument.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-response.lfe#L27">view source</a></div></div></div></body></html>