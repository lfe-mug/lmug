<html><head><meta charset="UTF-8"><link type="text/css" href="css/default.css" rel="stylesheet"><link type="text/css" href="css/hk-pyg.css" rel="stylesheet"><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><title>lmug-mw-content-type documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/quasiquoting/lodox">Lodox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">lmug</span> <span class="project-version">0.0.3</span></span> <span class="project-documented">(69% documented)</span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Application</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Includes</span></h3><ul><li class="depth-1"><a href="request.html"><div class="inner">request</div></a></li><li class="depth-1"><a href="response.html"><div class="inner">response</div></a></li></ul><h3 class="no-link"><span class="inner">Modules</span></h3><ul><li class="depth-1"><a href="lmug.html"><div class="inner">lmug</div></a></li><li class="depth-1 current"><a href="lmug-mw-content-type.html"><div class="inner">lmug-mw-content-type</div></a></li><li class="depth-1"><a href="lmug-opt.html"><div class="inner">lmug-opt</div></a></li><li class="depth-1"><a href="lmug-request.html"><div class="inner">lmug-request</div></a></li><li class="depth-1"><a href="lmug-response.html"><div class="inner">lmug-response</div></a></li><li class="depth-1"><a href="lmug-util.html"><div class="inner">lmug-util</div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Exports</span></a></h3><ul><li class="depth-1"><a href="lmug-mw-content-type.html#func-add-content-type.2F2"><div class="inner"><span>add-content-type/2</span></div></a></li><li class="depth-1"><a href="lmug-mw-content-type.html#func-add-content-type.2F3"><div class="inner"><span>add-content-type/3</span></div></a></li><li class="depth-1"><a href="lmug-mw-content-type.html#func-wrap.2F1"><div class="inner"><span>wrap/1</span></div></a></li><li class="depth-1"><a href="lmug-mw-content-type.html#func-wrap.2F2"><div class="inner"><span>wrap/2</span></div></a></li></ul></div><div id="content" class="module-docs"><h1 id="top" class="anchor">lmug-mw-content-type</h1><div class="doc"><p>Middleware for automatically adding a content type to response maps.</p>
</div><div class="public anchor" id="func-add-content-type.2F2"><h3>add-content-type/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(req resp)</code></pre>
</div><div class="doc"><p>The same as #'add-content-type/3 but with an empty list for options.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-mw-content-type.lfe#L31">view source</a></div></div><div class="public anchor" id="func-add-content-type.2F3"><h3>add-content-type/3</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">((match-request uri uri) resp opts)</code></pre>
</div><div class="doc"><p>Adds a content-type header to the response. Used by <code>#'wrap/2</code>.<br /> Returns a <code>response</code> record.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-mw-content-type.lfe#L35">view source</a></div></div><div class="public anchor" id="func-wrap.2F1"><h3>wrap/1</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(handler)</code></pre>
</div><div class="doc"><p>The same as #'wrap/2 but with an empty list for options.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-mw-content-type.lfe#L8">view source</a></div></div><div class="public anchor" id="func-wrap.2F2"><h3>wrap/2</h3><div class="usage"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(handler opts)</code></pre>
</div><div class="doc"><p>Middleware that adds a content-type header to the response if one is not<br /> set by the handler. Uses <code>#'lmug-util:ext-&gt;mime-type/1</code> to guess the<br /> content-type from the file extension in the URI. If no content-type can be<br /> found, it defaults to <code>application/octet-stream</code>.</p>
<p>Accepts the following options:</p>
<p>'mime-types - a proplist of filename extensions to mime-types that will be<br /> used in addition to the ones retiurned by<br /> <code>lmug-util:get-default-mime-types/0</code>. For the proper<br /> formatting of the data, see the source for the<br /> <code>get-default-mime-types</code> function mentioned above.</p>
</div><div class="src-link"><a href="https://github.com/lfex/lmug/blob/0.0.3/src/lmug-mw-content-type.lfe#L12">view source</a></div></div></div></body></html>